<html>
<head>
<style type="text/css">
	html,body{
		height: 100%;
		width: 100%;
		margin: 0;
		padding: 0;
	}
	#main{
		height: 100%;
		height: 100%;
	}
</style>
</head>
<body>
<div id="main">
	
</div>
<script type="text/javascript" src="../src/lib/require.min.js"></script>
<script type="text/javascript" src="../src/lib/frender.js"></script>
<script type="text/javascript">
require(['frender', 'frender/graphic/shape/Line', 'frender/custom/TaskBlock', 'frender/custom/LineTo'],
function (frender, Line, TaskBlock, LineTo){
	var zr = frender.init(document.getElementById("main"));
	
	var start = new TaskBlock(zr, {
									x: 400, 
									y: 50, 
									start: true, 
									width: 50, 
									height: 50,
									style: {
										fill: '#18a689',
										text: 'Start',
										textFill: '#fff'
									}
								});
	var task = new TaskBlock(zr, {
									x: 375, 
									y: 200, 
									width: 100, 
									height: 60, 
									title: '用户任务',
									style: {
										fill: '#fff',
										text: '1fefwfwfwxgch\nkdadalj',
										textOffset: [0, 5],
										stroke: '#333'
									}
								});
	var end = new TaskBlock(zr, {
									x: 400, 
									y: 350, 
									end: true, 
									width: 50, 
									height: 50,
									style: {
										text: 'End',
										textFill: '#fff',
										fontWeight: '600',
										fill: '#cb3103',
									}
								});
	// 全局控制连线的容器
	var lineCache = {
		start: null,
		end: null,
		status: false, //判断鼠标是否按下
		context: ''//父容器
	};
	// 辅助线
	var helpLine = new Line({
		shape:{
			x1: 0,
			y1: 0,
			x2: 0,
			y2: 0
		}
	});
	zr.add(helpLine);
	// 开启连线
	new LineTo(zr, start, lineCache, helpLine).drawLine(start.getPointObj()[2], task.getPointObj()[0]);
	new LineTo(zr, task, lineCache, helpLine).drawLine(task.getPointObj()[2], end.getPointObj()[0]);
	new LineTo(zr, end, lineCache, helpLine);
})
</script>
</body>
</html>